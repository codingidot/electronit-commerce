# 📌 Apache Kafka 기초 개념 정리

## 1. Kafka란?
- **Apache Kafka**는 **대용량 데이터를 빠르게 전달·저장·처리**할 수 있는 **분산 메시지 스트리밍 플랫폼**입니다.  
- 쉽게 말해, **데이터를 실시간으로 주고받는 고속·안정적인 파이프라인** 역할을 합니다.  
- 예: 사용자가 결제하면 → "결제 이벤트"가 Kafka로 전달 → 다른 시스템(재고 관리, 알림, 정산)이 즉시 구독해서 처리.

---

## 2. 주요 특징
1. **고성능**: 초당 수백만 건의 메시지 처리 가능  
2. **분산 구조**: 여러 서버(브로커)에 데이터를 나누어 저장 → 장애 대응 및 확장성  
3. **내구성 보장**: 디스크에 데이터를 영속 저장 (데이터 손실 방지)  
4. **실시간 스트리밍**: 이벤트 기반 시스템 구현에 최적화  
5. **유연한 확장성**: 프로듀서(데이터 발행자), 컨슈머(데이터 구독자) 수를 쉽게 늘릴 수 있음  

---

## 3. 기본 구성 요소
- **Producer (프로듀서)**  
  데이터를 카프카에 **발행(Publish)**하는 역할  
  예: 주문 서비스가 "주문 생성 이벤트"를 Kafka에 보냄  

- **Broker (브로커)**  
  Kafka 서버 자체  
  메시지를 저장하고 컨슈머에게 전달  
  여러 개의 브로커가 모여 클러스터 구성  

- **Topic (토픽)**  
  메시지를 구분하는 **카테고리/채널**  
  예: `order-created`, `payment-done`  

- **Partition (파티션)**  
  토픽을 나눈 단위 (병렬 처리 및 확장성 확보)  
  각 메시지는 **offset(순번)**을 가짐  

- **Consumer (컨슈머)**  
  Kafka에서 데이터를 **구독(Subscribe)**하고 처리하는 주체  
  예: 재고 서비스가 `order-created` 토픽을 구독해서 재고 차감  

- **Consumer Group**  
  여러 컨슈머가 협력해 데이터를 나눠 처리하는 그룹  
  같은 그룹 안에서는 파티션이 중복 소비되지 않음  

---

## 4. 동작 흐름 (예시)
1. 주문 서비스(Producer) → `order-created` 토픽에 "주문 이벤트" 발행  
2. Kafka Broker → 이벤트를 저장하고 관리  
3. 재고 서비스(Consumer Group A), 알림 서비스(Consumer Group B) → 각각 토픽 구독  
   - 재고 서비스: 재고 차감  
   - 알림 서비스: 고객에게 주문 확인 메시지 발송  

👉 **이벤트 한 번 발행 → 여러 시스템에서 동시에 활용 가능**

---

## 5. Kafka가 필요한 이유
- **기존 방식**: 서비스 간 직접 API 호출 → 시스템 간 결합도 ↑, 장애 시 전체 영향  
- **Kafka 방식**: 이벤트 중심 아키텍처 → 서비스 간 결합도 ↓, 확장성 ↑, 비동기 처리 가능  

---

✅ **한 줄 요약**  
Kafka는 "이벤트를 중심으로 여러 시스템이 실시간으로 데이터를 주고받을 수 있게 해주는 고성능 분산 메시지 플랫폼"입니다.  
